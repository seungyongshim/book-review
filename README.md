# ðŸ§ 1. ì‹œìž‘í•˜ê¸°



### ì†Œê°œ

ESë¥¼ íš¨ê³¼ì ìœ¼ë¡œ ì‚¬ìš©í•˜ë ¤ë©´ ë¨¼ì € ì„¤ê³„ì™€ ê·¸ ë™ìž‘ì„ ì´í•´í•˜ëŠ” ê²ƒì´ ê°€ìž ì¤‘ìš”í•˜ë‹¤. 1ìž¥ì—ì„œ ì‚´íŽ´ë³¼ ì£¼ìš” ê°œë…ì€ ë…¸ë“œ, ìƒ‰ì¸, ìƒ¤ë“œ, íƒ€ìž…/ë§¤í•‘, ë„íë¨¼íŠ¸, í•„ë“œë‹¤. ESëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì—¬ëŸ¬ ë¶„ì•¼ì— ì‚¬ìš©í•  ìˆ˜ ìžˆë‹¤.

* ESê°€ ì£¼ë¡œ ì‚¬ìš©ë˜ëŠ” ê²€ìƒ‰ ì—”ì§„
* ESì˜ ê°•ë ¥í•œ ì§‘ê³„ ì‹œìŠ¤í…œì„ ë°”íƒ•ìœ¼ë¡œ í•˜ëŠ” ë¶„ì„ í”„ë ˆìž„ì›Œí¬
* ë¡œê·¸ë¥¼ ì£¼ë¡œ ë‹¤ë£¨ëŠ” ë°ì´í„° ì €ìž¥ì†Œ ESëŠ” ì„±ëŠ¥, ê²€ìƒ‰ í’ˆì§ˆì„ í–¥ìƒì‹œí‚¤ê³  í™•ìž¥ì„±ê³¼ ê°€ìš©ì„±ì„ í–¥ìƒ ì‹œí‚¤ê¸° ìœ„í•œ ì¸í”„ë¼ë¥¼ ìµœì í™”í•  ì‹œê¸°ì™€ ë°©ë²•ì„ ê²°ì •í•˜ëŠ”ë° ë„ì›€ì„ ì¤€ë‹¤.

### ë…¸ë“œì™€ í´ëŸ¬ìŠ¤í„° ì´í•´

ëª¨ë“  ESì˜ ì¸ìŠ¤í„´ìŠ¤ëŠ” ë…¸ë“œì´ë‹¤. ì—¬ëŸ¬ ë…¸ë“œëŠ” í´ëŸ¬ìŠ¤í„°ë¡œ ê·¸ë£¹ì„ ì§“ëŠ”ë‹¤. ì´ê²ƒì´ ESì˜ í´ëŸ¬ìŠ¤í„° êµ¬ì„±ë°©ë²•ì˜ ê¸°ì´ˆì´ë‹¤.

#### ë¶„ì„

RAM, CPU, ë””ìŠ¤í¬ ê³µê°„ì²˜ëŸ¼ ê°€ìš©í•œ ë¦¬ì†ŒìŠ¤ì— ë”°ë¼ ë¬¼ë¦¬ ì„œë²„ë‚˜ ê°€ìƒ ì„œë²„ì— í•˜ë‚˜ ë˜ëŠ” ê·¸ ì´ìƒì˜ ES ë…¸ë“œë¥¼ ì„¤ì¹˜í•  ìˆ˜ ìžˆë‹¤. ê¸°ë³¸ ë…¸ë“œì— ë°ì´í„°ë¥¼ ì €ìž¥í•˜ê³  ìš”ì²­ê³¼ ì‘ë‹µì„ ì²˜ë¦¬í•œë‹¤. ë…¸ë“œë¥¼ ì‹œìž‘í•˜ëŠ” ë™ì•ˆ ì—¬ëŸ¬ ì ˆì°¨ë¥¼ ìˆ˜í–‰í•˜ê²Œ ëœë‹¤. ì˜ˆë¥¼ ë“¤ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.

* êµ¬ì„± ì •ë³´ë¥¼ í™˜ê²½ ë³€ìˆ˜ì™€ elasticsearch.yml êµ¬ì„± íŒŒì¼ì—ì„œ ì½ì–´ì˜¨ë‹¤.
* ë…¸ë“œ ì´ë¦„ì€ ì„¤ì • íŒŒì¼ì— ì„¤ì •í•˜ê±°ë‚˜ ê·¸ë ‡ì§€ ì•Šë‹¤ë©´ ë‚´ìž¥ëœ ëž¨ë¤ ì´ë¦„ ëª©ë¡ì—ì„œ ìžë™ìœ¼ë¡œ ì„ íƒí•œë‹¤.
* ë‚´ë¶€ì ìœ¼ë¡œ ES ì—”ì§„ì€ í˜„ìž¬ ì„¤ì¹˜ëœ ê°€ìš©í•œ ëª¨ë“  ëª¨ë“ˆê³¼ í”ŒëŸ¬ê·¸ì¸ì„ ì´ˆê¸°í™”í•œë‹¤.

ë…¸ë“œ ì‹œìž‘ í›„ ë…¸ë“œëŠ” ë‹¤ë¥¸ í´ëŸ¬ìŠ¤í„° ë§´ë²„ë¥¼ ê²€ìƒ‰í•˜ê³  ìƒ‰ì¸ê³¼ ìƒ¤ë“œ ìƒíƒœë¥¼ ì ê²€í•œë‹¤. í´ëŸ¬ìŠ¤í„°ì—ì„œ ë‘ê°œ í˜¹ì€ ê·¸ ì´ìƒì˜ ë…¸ë“œë¥¼ ê²°í•©í•˜ë ¤ë©´ ë‹¤ìŒ ê·œì¹™ì„ ë§Œì¡±í•´ì•¼ í•œë‹¤.

* ES ë²„ì „ì´ ë™ì¼í•´ì•¼ í•œë‹¤. ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ ê±°ë¶€ëœë‹¤.
* í´ëŸ¬ìŠ¤í„° ì´ë¦„ì´ ë™ì¼í•´ì•¼ í•œë‹¤. ë„¤íŠ¸ì›Œí¬ëŠ” ë¸Œë¡œë“œ ìºìŠ¤íŠ¸ ê²€ìƒ‰ì„ ì§€ì›í•˜ê²Œ êµ¬ì„±í•´ì•¼ í•˜ëŠ”ë° ì´ë¥¼ í†µí•´ ì„œë¡œ í†µì‹  í•  ìˆ˜ ìžˆë‹¤.

í´ëŸ¬ìŠ¤í„° ê´€ë¦¬ì— ìžˆì–´ì„œ ì¼ë°˜ì ì¸ ì ‘ê·¼ ë°©ë²•ì€, í´ëŸ¬ìŠ¤í„° ìˆ˜ì¤€ì˜ ì•¡ì…˜ì´ ì£¼ë¡œ ì¡°íšŒí•˜ëŠ” í•˜ë‚˜ ë˜ëŠ” ê·¸ ì´ìƒì˜ ë§ˆìŠ¤í„° ë…¸ë“œë¥¼ ë‘ëŠ” ê²ƒì´ë‹¤. ë§ˆìŠ¤í„° ë…¸ë“œì˜ ìƒëŒ€ ê°œë…ì€ ë§ˆìŠ¤í„° ë°ì´í„°ì™€ í–‰ìœ„ë¥¼ ë³µì œí•˜ëŠ” ë³´ì¡° ë…¸ë“œë‹¤. ì“°ê¸° ìž‘ì—…ì€ ì¼ê´€ì„±ì„ ìœ„í•´ ëª¨ë“  ë³€ê²½ í–‰ìœ„ë¥¼ ë§ˆìŠ¤í„° ë…¸ë“œì— ë¨¼ì € ì»¤ë°‹í•˜ê³  ì´í›„ ë³´ì¡° ë…¸ë“œì— ë³µì œí•œë‹¤. ë‹¤ì¤‘ ë…¸ë“œê°€ ìžˆëŠ” í´ëŸ¬ìŠ¤í„°ì—ì„œ ë§ˆìŠ¤í„° ë…¸ë“œê°€ ì£½ìœ¼ë©´ ë§ˆìŠ¤í„° ìžê²©ì„ ì†Œìœ í•  ìˆ˜ ìžˆëŠ” í›„ë³´ ë…¸ë“œì¤‘ì— ìƒˆë¡œìš´ ë§ˆìŠ¤í„°ë¥¼ ì„ ì¶œí•œë‹¤. ì´ ì ‘ê·¼ ë°©ë²•ìœ¼ë¡œ failoverë¥¼ ìžë™ìœ¼ë¡œ í•˜ë„ë¡ ES í´ëŸ¬ìŠ¤í„°ë¥¼ ì„¤ì •í•  ìˆ˜ ìžˆë‹¤.

#### ë³´ì¶© ì„¤ëª…

ì¼ëž˜ìŠ¤í‹±ì„œì¹˜ì—ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ë„¤ ì¢…ë¥˜ì˜ ë…¸ë“œê°€ ìžˆë‹¤.

* ë§ˆìŠ¤í„° ë…¸ë“œ RESTì‘ë‹µê³¼ ê²€ìƒ‰ì— ê´€í•œ ëª¨ë“  ìž‘ì—…ì„ ì²˜ë¦¬í•  ìˆ˜ ìžˆë‹¤. ë§¤ë²ˆ ìž‘ì—…ì´ ì‹¤í–‰ë˜ëŠ” ë™ì•ˆ MapReduce ë°©ì‹ìœ¼ë¡œ ìž‘ì—…ì„ ì‹¤í–‰í•œë‹¤. ë¹„ ë°ì´í„° ë…¸ë“œëŠ” ê¸°ë³¸ ìƒ¤ë“œì— ìž‘ì—…ì„ ë¶„ë°°í•˜ê³  ìƒ¤ë“œì˜ ê²°ê³¼ë¥¼ ìˆ˜ì§‘/ì§‘ê³„í•˜ëŠ” ì—­í™œì„ ë‹´ë‹¹í•œë‹¤. ìµœì¢…ì ìœ¼ë¡œ ì‘ë‹µì„ í´ë¼ì´ì–¸íŠ¸ë¡œ ì „ì†¡í•˜ê²Œ ëœë‹¤. ì´ëŠ” ì§‘ê³„, ì¡°íšŒ, ìˆ˜ì§‘, ìºì‹±, ìž‘ì—…ì´ ë°œìƒí•˜ì—¬ ë§Žì€ ë©”ëª¨ë¦¬ë¥¼ í•„ìš”ë¡œ í•˜ê²Œ ëœë‹¤.
* ë°ì´í„° ë…¸ë“œ ë°ì´í„°ë¥¼ ë‚´ë¶€ì— ì €ìž¥í•œë‹¤. ë£¨ì”¬ ìƒ‰ì¸ì²˜ëŸ¼ ìƒ‰ì¸ëœ ë„íë¨¼íŠ¸ë¥¼ ì €ìž¥í•˜ëŠ” ìƒ‰ì¸ ë…¸ë“œê°€ í¬í•¨ëœë‹¤.
* ìˆ˜ì§‘ ë…¸ë“œ ìˆ˜ì§‘ íŒŒì´í”„ë¼ì¸ì„ ì²˜ë¦¬ í•  ìˆ˜ ìžˆë‹¤. logstashì˜ ì¼ë¶€ ì—­í™œì„ ESë¡œ ì´ì „í•˜ì˜€ë‹¤.
* í´ë¼ì´ì–¸íŠ¸ ë…¸ë“œ ì–´ë–¤ ë°©ì‹ì´ë“  ë¬´ì–¸ê°€ ì²˜ë¦¬í•˜ëŠ”ë° ì‚¬ìš©í•œë‹¤. ë©”ëª¨ë¦¬ ë¶€ì¡±ì´ë‚˜ ìž˜ëª»ëœ ì¿¼ë¦¬ ê°™ì€ ë¬¸ì œê°€ ë°œìƒí•˜ë©´ ë°ì´í„° ì†ì‹¤, í´ëŸ¬ìŠ¤í„° ì•ˆì •ì„± ì €í•˜ ì—†ì´ ê°•ì œë¡œ ì¢…ë£Œ ìž¬ì‹œìž‘ì´ ê°€ëŠ¥í•˜ë‹¤.

í‘œì¤€ êµ¬ì„±ì„ ì‚¬ìš©í•˜ë©´ ë…¸ë“œëŠ” ë§ˆìŠ¤í„°ì´ë©° ë°ì´í„° ì»¨í…Œì´ë„ˆê³  ìˆ˜ì§‘ë…¸ë“œê°€ ëœë‹¤. ëŒ€ê·œëª¨ í´ëŸ¬ìŠ¤í„° ì•„í‚¤í…ì²˜ì—ì„œ ì¼ë¶€ ë…¸ë“œë¥¼ ë°ì´í„°ê°€ ì—†ê³  ë‹¤ëŸ‰ì˜ ë©”ëª¨ë¦¬ë¥¼ ê°€ì§€ë‹ˆ ë‹¨ìˆœ í´ë¼ì´ì–¸íŠ¸ ë…¸ë“œë¡œ ë‘ë©´ ë°ì´í„° ë…¸ë“œê°€ ìš”êµ¬í•˜ëŠ” ìžì›ì„ ì¤„ì´ë©´ì„œ ë¡œì»¬ ë©”ëª¨ë¦¬ ìºì‹œë¡œ ì‚¬ìš©í•  ìˆ˜ ìžˆê¸° ë•Œë¬¸ì— ì „ì²´ì ì¸ ê²€ìƒ‰ ì„±ëŠ¥ì„ í–¥ìƒ ì‹œí‚¬ ìˆ˜ ìžˆë‹¤.

### ë…¸ë“œ ì„œë¹„ìŠ¤ ì´í•´

ë…¸ë“œê°€ ì‹¤í–‰ ì¤‘ì¼ ë•Œ ì¸ìŠ¤í„´ìŠ¤ ìžì‹ ì€ ë§Žì€ ì„œë¹„ìŠ¤ë¥¼ ê´€ë¦¬í•œë‹¤. ì„œë¹„ìŠ¤ëŠ” ë…¸ë“œì— ì¶”ê°€ì ì¸ ê¸°ëŠ¥ì„ ì œê³µí•˜ê³ , ë„¤íŠ¸ì›Œí‚¹,ìƒ‰ì¸, ë¶„ì„ ë“±ê³¼ ê°™ì€ ë‹¤ì–‘í•œ ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤.

#### ë¶„ì„

ESëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ì¶”ê°€ í”ŒëŸ¬ê·¸ì¸ì„ í†µí•´ ë§Žì€ í™•ìž¥ ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤. ë…¸ë“œê°€ ì‹œìž‘í•˜ë©´ì„œ ë‹¤ìŒê³¼ ê°™ì€ í•„ìˆ˜ ì„œë¹„ìŠ¤ê°€ ìžë™ìœ¼ë¡œ ì‹œìž‘í•œë‹¤. ì‹¤ì œë¡œëŠ” ì´ë³´ë‹¤ë„ ë” ë§Žì€ ì„œë¹„ìŠ¤ê°€ ì‹œìž‘ëœë‹¤.

* í´ëŸ¬ìŠ¤í„° ì„œë¹„ìŠ¤ í´ëŸ¬ìŠ¤í„° ìƒíƒœë¥¼ ê´€ë¦¬í•˜ê³  ì¸íŠ¸ë¼ ë…¸ë“œì™€ í†µì‹ í•˜ë©° ë™ê¸°í™”ì— ë„ì›€ì„ ì¤€ë‹¤.
* ìƒ‰ì¸ ì„œë¹„ìŠ¤ ëª¨ë“  ìƒ‰ì¸ ìž‘ì—…, ëª¨ë“  í™œì„± ìƒ‰ì¸ê³¼ ìƒ¤ë“œ ì´ˆê¸°í™”ë¥¼ ê´€ë¦¬í•œë‹¤.
* ë§¤í•‘ ì„œë¹„ìŠ¤ í´ëŸ¬ìŠ¤í„°ì— ì €ìž¥ëœ ë„íë¨¼íŠ¸ íƒ€ìž…ì„ ê´€ë¦¬í•˜ëŠ” ë° ë„ì›€ì„ ì¤€ë‹¤.
* ë„¤íŠ¸ì›Œí¬ ì„œë¹„ìŠ¤ HTTP REST(9200í¬íŠ¸), ë‚´ë¶€ ES í”„ë¡œí† ì½œ(9300í¬íŠ¸), ê·¸ë¦¬ê³  thrift í”ŒëŸ¬ê·¸ì¸ì„ ì„¤ì¹˜í–ˆë‹¤ë©´ thriftì™€ ê°™ì€ ì„œë¹„ìŠ¤ê°€ ìžˆë‹¤.
* í”ŒëŸ¬ê·¸ì¸ ì„œë¹„ìŠ¤ 12ìž¥ì—ì„œ ì¶”ê°€ë¡œ ì„¤ëª…í•œë‹¤.
* ì§‘ê³„ ì„œë¹„ìŠ¤ í†µê³„, ížˆìŠ¤í† ê·¸ëž¨, ë„íë¨¼íŠ¸ ê·¸ë£¹í™” ì²˜ëŸ¼ ES ë„íë¨¼íŠ¸ë¥¼ ë°”íƒ•ìœ¼ë¡œ ê³ ê¸‰ ë¶„ì„ì„ ì œê³µí•œë‹¤.
* Ingest ì„œë¹„ìŠ¤ í•„ë“œ enrichment, NLP ì²˜ë¦¬, íƒ€ìž… ë³€í™˜, ìžë™ í•„ë“œ ì±„ìš°ê¸° ê°™ì€ ë„íë¨¼íŠ¸ ì „ì²˜ë¦¬ ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤.
* ì–¸ì–´ ìŠ¤í¬ë¦½íŒ… ì„œë¹„ìŠ¤ ESì— ìƒˆë¡œìš´ ì–¸ì–´ ìŠ¤í¬ë¦½íŒ… ì§€ì›ì„ ì¶”ê°€ í•  ìˆ˜ ìžˆë‹¤.

### ë°ì´í„° ê´€ë¦¬

ESë¥¼ ê²€ìƒ‰ ì—”ì§„ì´ë‚˜ ë¶„ì‚° ë°ì´í„° ì €ìž¥ì†Œë¡œ ì‚¬ìš©í•  ê³„íšì´ë¼ë©´ ES ë°ì´í„°ë¥¼ ì €ìž¥í•˜ê³  ê´€ë¦¬í•˜ëŠ” ë°©ë²•ì— ëŒ€í•œ ê°œë…ì  ì´í•´ê°€ í•„ìš”í•˜ë‹¤.

#### ë¶„ì„

ì£¼ìš” ë°ì´í„° ì»¨í…Œì´ë„ˆë¥¼ ìƒ‰ì¸(index)ë¼ ë¶€ë¥´ëŠ”ë° ì´ëŠ” ì „í†µì ì¸ SQLì˜ ë°ì´í„°ë² ì´ìŠ¤ì™€ ë¹„ìŠ·í•˜ë‹¤. ìƒ‰ì¸ì—ì„œ ë°ì´í„°ëŠ” Mappingì´ë¼ ë¶€ë¥´ëŠ” ë°ì´í„° íƒ€ìž…ìœ¼ë¡œ ê·¸ë£¹í™” ëœë‹¤. Mappingì€ ë ˆì½”ë“œ ìž‘ì„± ë°©ë²•ì„ ê¸°ìˆ í•œ ê²ƒì´ë‹¤. ESì— ì €ìž¥í•´ì•¼ í•˜ëŠ” ëª¨ë“  ë ˆì½”ë“œëŠ” JSONì„ ë”°ë¼ì•¼ í•œë‹¤. ESëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ìŠ¤í‚¤ë§ˆê°€ ì—†ëŠ” ë°ì´í„° ì €ìž¥ì†Œì´ë‹¤. ë”°ë¼ì„œ ë ˆì½”ë“œë¥¼ ìž…ë ¥í•˜ë©´ ë°ì½”ë“œë¥¼ ì²˜ë¦¬í•˜ê³  ì—¬ëŸ¬ í•„ë“œë¡œ ë‚˜ëˆ„ë©°, ìž…ë ¥ëœ ë°ì´í„° ë¥¼ ê´€ë¦¬í•˜ëŠ” ìŠ¤í‚¤ë§ˆë¥¼ ì—…ë°ì´íŠ¸ í•˜ê²Œëœë‹¤. ESëŠ” ëŒ€ëŸ‰ì˜ ë ˆì½”ë“œë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•´ ìƒ‰ì¸ì„ ì—¬ëŸ¬ ìƒ¤ë“œë¡œ ë¶„í•  í•˜ì—¬ ì—¬ëŸ¬ ë…¸ë“œì— ë¶„ì‚° ì €ìž¥í•œë‹¤. ES ì–´í”Œë¦¬ì¼€ì´ì…˜ ê³„ì¸µì´ ëª¨ë“  ì¼ë°˜ ë ˆì½”ë“œ ìž‘ì—…ì„ ìžë™ìœ¼ë¡œ ê´€ë¦¬í•˜ë¯€ë¡œ ìƒ¤ë“œ ê´€ë¦¬ëŠ” ì‚¬ìš©ìžê°€ ì§€ì •í•  í•„ìš”ëŠ” ì—†ë‹¤. ëª¨ë“  ë ˆì½”ë“œëŠ” ë ˆì½”ë“œ ID ê¸°ë°˜ì˜ ìƒ¤ë”© ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ ë‹¨ì¼ ìƒ¤ë“œì— ì €ìž¥ëœë‹¤. ë¡œë”© ë° ë ˆì½”ë“œ/ê°ì²´ ë³€ê²½ì— í•„ìš”í•œ ëŒ€ë¶€ë¶„ ìž‘ì—…ì€ ì „ì²´ ìƒ¤ë“œë¥¼ ì¡°íšŒí•˜ì§€ ì•Šì•„ë„ ê°ì²´ë¥¼ í¬í•¨í•˜ëŠ” ë‹¨ì¼ ìƒ¤ë“œì—ì„œ ìˆ˜í–‰ ê°€ëŠ¥í•˜ë‹¤. ë‹¤ìŒì€ ESì™€ SQL, MongoDBë¥¼ ë¹„êµí•œ í‘œë‹¤.

| ES    | SQL    | MongoDB |
| ----- | ------ | ------- |
| ìƒ‰ì¸    | ë°ì´í„°ë² ì´ìŠ¤ | ë°ì´í„°ë² ì´ìŠ¤  |
| ìƒ¤ë“œ    | ìƒ¤ë“œ     | ìƒ¤ë“œ      |
| ë§¤í•‘/íƒ€ìž… | í…Œì´ë¸”    | ì»¬ë ‰ì…˜     |
| í•„ë“œ    | ì¹¼ëŸ¼     | í•„ë“œ      |
| ê°ì²´    | ë ˆì½”ë“œ    | ë ˆì½”ë“œ     |

#### ë³´ì¶© ì„¤ëª…

ESëŠ” ìƒ‰ì¸/ë§¤í•‘/ê°ì²´ ìž‘ì—…ì˜ ì•ˆì •ì„±ì„ ë³´ìž¥í•˜ê¸° ìœ„í•´ ë‚´ë¶€ì ìœ¼ë¡œ ìž‘ì—…ì„ ì‹¤í–‰í•˜ëŠ” ë°©ë²•ì— ê´€í•œ ì—„ê²©í•œ ê·œì¹™ì„ ê°–ê³  ìžˆë‹¤.

* í´ëŸ¬ìŠ¤í„°/ìƒ‰ì¸ ìž‘ì—… ëª¨ë“  ì“°ê¸° ìž‘ì—…ì€ ìž ê¸´ ìƒíƒœì´ë©°, ë¨¼ì € ë§ˆìŠ¤í„° ë…¸ë“œì— ë°˜ì˜í•˜ë©´ ë³´ì¡° ë…¸ë“œì— ë°˜ì˜ëœë‹¤. ì½ê¸° ìž‘ì—…ì€ ëª¨ë“  ë…¸ë“œê°€ ì‹¤í–‰í•œë‹¤.
* ë„íë¨¼íŠ¸ ìž‘ì—… ëª¨ë“  ì“°ê¸° ìž‘ì—…ì€ ì¡°íšŒ ìƒ¤ë“œì—ì„œë§Œ ìž ê¸´ë‹¤. ì½ê¸° ìž‘ì—…ì€ ëª¨ë“  ë ˆí”Œë¦¬ì¹´ ìƒ¤ë“œì— ì „ë‹¬ëœë‹¤.

ë ˆì½”ë“œë¥¼ ESì— ì €ìž¥í•  ë•Œ ë‹¤ìŒì— ì˜í•´ ëª©ì  ìƒ¤ë“œë¥¼ ì„ íƒí•œë‹¤.

* ë ˆì½”ë“œì˜ ê³ ìœ  ì‹ë³„ìž IDê°€ ì—†ë‹¤ë©´ ESê°€ ìžë™ìœ¼ë¡œ ìƒì„±í•œë‹¤.
* ë¼ìš°íŒ…ì´ë‚˜ ë¶€ëª¨ íŒŒë¼ë¯¸í„°ë¥¼ ì§€ì •í–ˆë‹¤ë©´ ì´ë“¤ íŒŒë¼ë¯¸í„° í•´ì‹œ ê°’ìœ¼ë¡œ ì í•©í•œ ìƒ¤ë“œë¥¼ ì„ íƒí•œë‹¤. ESëŠ” ê°€ìš© ê°€ëŠ¥í•œ ëª¨ë“  ë…¸ë“œì— ìƒ¤ë“œë¥¼ ê· í˜•ì ìœ¼ë¡œ ë¶„í¬ì‹œí‚¤ë ¤ ë…¸ë ¥í•˜ë¯€ë¡œ ìƒ¤ë“œ ìƒ‰ì¸ì„ ë¶„í•  í•˜ì—¬ ì—¬ëŸ¬ ë…¸ë“œì— ë°ì´í„°ë¥¼ ì €ìž¥í•œë‹¤. ëª¯ëŠ ìƒ¤ë“œëŠ” 232 ë ˆì½”ë“œ(ì•½ 49ì–µê±´)ê¹Œì§€ ì €ìž¥ í•  ìˆ˜ ìžˆìœ¼ë¯€ë¡œ ì €ìž¥ ê³µê°„ì€ ê²°êµ­ ë¬¼ë¦¬ì ì¸ ì €ìž¥ ê³µê°„ì´ ì œì•½ìƒì´ ëœë‹¤. ìƒ¤ë“œê°€ ë°ì´í„°ë¥¼ ê°–ê³  ìžˆê¸° ë•Œë¬¸ì— ê²€ìƒ‰ ê³¼ì •ì—ì„œ ê³„ì‚°í•˜ê³  ê²°ê³¼ë¥¼ ì¡°íšŒí•  ë•Œ ìƒ¤ë“œë¥¼ ì‚¬ìš©í•œë‹¤. ê·¸ëž˜ì„œ ëŒ€ê·œëª¨ ë°ì´í„°ì—ì„œ ES ì„±ëŠ¥ì€ ìƒ¤ë“œ ê°œìˆ˜ì— ë”°ë¼ ìˆ˜í‰ì ìœ¼ë¡œ í™•ìž¥ëœë‹¤. ëª¨ë“  ë„¤ì´í‹°ë¸Œ ë ˆì½”ë“œ ìž‘ì—…(CRUD)ëŠ” ìƒ¤ë“œê°€ ê´€ë¦¬í•œë‹¤. ì‚¬ìš©ìžëŠ” ìƒ¤ë“œê°€ íˆ¬ëª…í•˜ì§€ë§Œ ê³ ê¸‰ ì‚¬ìš©ìžë“¤ì€ ì‚¬ìš©ìž ì§€ì • ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ìœ„í•˜ì—¬ ê¸°ë³¸ ìƒ¤ë“œ ë¼ìš°íŒ…ì„ ë³€ê²½í•˜ê³  ê´€ë¦¬í•˜ë ¤ í•œë‹¤. ë³´í†µì€ ê²€ìƒ‰/ìƒ‰ì¸/ë¶„ì„ ìž‘ì—…ì˜ ì„±ëŠ¥ì„ ë†’ì´ê¸° ìœ„í•˜ì—¬ ê³ ê° ë°ì´í„°ë¥¼ ë™ì¼í•œ ìƒ¤ë“œì— ìž…ë ¥í•˜ë ¤ëŠ” ë“±ì˜ ìš”êµ¬ ì‚¬í•­ì´ ì¡´ìž¬ í•˜ëŠ” ê²½ìš°ê°€ ë°œìƒí•œë‹¤.

#### ëª¨ë²”ì‚¬ë¡€

ìƒ‰ì¸ ì„¸ê·¸ë¨¼íŠ¸ë¥¼ ì§€ì†ì ìœ¼ë¡œ ë³‘í•©í•˜ê³  í¬ê¸°ë¥¼ ì¡°ì •í•˜ëŠ” ìƒ‰ì¸ ìž‘ì—…ìœ¼ë¡œ ì¸í•œ ì„±ëŠ¥ ì €í•˜ë¥¼ í”¼í•˜ê¸° ìœ„í•´ì„œ ìƒ¤ë“œì˜ í¬ê¸°ëŠ” ì•„ì£¼ í¬ì§€ëŠ” ì•Šì•„ì•¼ í•œë‹¤. ë³´í†µ 10GBytesë¥¼ ë„˜ì§€ ë§ì•„ì•¼ í•œë‹¤. ë£¨ì”¬ ìƒ‰ì¸ ìž‘ì—…ì´ ì§„í–‰ë˜ëŠ” ë™ì•ˆ ESëŠ” ì“°ê¸° ì ì—… ì„±ëŠ¥ì„ ë†’ì´ê¸° ìœ„í•˜ì—¬ ìƒ‰ì¸ëœ ë„íë¨¼íŠ¸ë¥¼ ë¸”ë¡ ë‹¨ìœ„ë¡œ ìž‘ì„±í•œë‹¤. ì‹œê°„ì´ ì§€ë‚˜ ìž‘ì€ ì„¸ê·¸ë¨¼íŠ¸ë“¤ì„ ëª¨ì•„ ìƒˆë¡œìš´ fragmentì— ì“°ê³  ì‚­ì œí•œë‹¤. ë§Žì€ ë°ì´í„°ë¥¼ ê°€ì§„ í° ìƒ¤ë“œë¡œ ì¸í•´ ë‹¨íŽ¸í™”ê°€ ë°œìƒí•˜ë©´ ìƒ‰ì¸ ì„±ëŠ¥ì´ í¬ê²Œ ê°ì†Œí•˜ê²Œ ëœë‹¤. ESëŠ” ë¶„ì‚° ê²€ìƒ‰ì´ê¸° ë•Œë¬¸ì— MapReduceë¡œ ë™ìž‘í•˜ë¯€ë¡œ ê²€ìƒ‰ ì„±ëŠ¥ì˜ ì €í•˜ë¥¼ í”¼í•˜ê¸° ìœ„í•´ì„œ ìƒ¤ë“œ ê°œìˆ˜ë¥¼ ì§€ë‚˜ì¹˜ê²Œ ë§Žì´ í• ë‹¹í•˜ëŠ” ê²ƒë„ ì¢‹ì§€ ì•Šë‹¤. ìƒ¤ë“œëŠ” ìƒ‰ì¸/ê²€ìƒ‰ ìž‘ì—…ì„ í•˜ëŠ” ì›Œì»¤ë¡œ êµ¬ì„±ë˜ê³ , ë§ˆìŠ¤í„°/í´ë¼ì´ì–¸íŠ¸ ë…¸ë“œëŠ” Reduxì—­í™œì„ í•œë‹¤. ë¹ˆ ìƒ¤ë“œê°€ ë§Žì€ ìƒ‰ì¸ì€ ë©”ëª¨ë¦¬ë¥¼ ì†Œëª¨í•˜ê³  ë„¤íŠ¸ì›Œí¬ì™€ ê²°ê³¼ ì§‘ê³„ ë‹¨ê³„ì˜ ì˜¤ë²„í—¤ë“œë¡œ ì¸í•´ ê²€ìƒ‰ ì‹œê°„ë§Œ ì¦ê°€ ì‹œí‚¤ê²Œ ëœë‹¤.

### í´ëŸ¬ìŠ¤í„°, ë³µì œ, ìƒ¤ë”©ì˜ ì´í•´

ìƒ¤ë“œ ê´€ë¦¬ì™€ ê´€ë ¨í•´ì„œ ë³µì œì™€ í´ëŸ¬ìŠ¤í„° ìƒíƒœì˜ ì£¼ìš” ê°œë…ì´ ìžˆë‹¤.

#### ë¶„ì„

ìƒ‰ì¸ì€ í•œ ê°œ ì´ìƒì˜ ë ˆí”Œë¦¬ì¹´ë¥¼ ê°€ì§„ë‹¤. ì“°ê¸° ìž‘ì—…ì˜ ì¼ê´€ì„±ì„ ìœ ì§€í•˜ê¸° ìœ„í•˜ì—¬ ë‹¤ìŒì˜ ì ˆì°¨ë¡œ ë³µì œê°€ ì¼ì–´ë‚œë‹¤.

* ì“°ê¸° ìž‘ì—…ì€ ì£¼ ìƒ¤ë“œì—ì„œ ë¨¼ì € ì‹¤í–‰í•œë‹¤.
* ì£¼ ìƒ¤ë“œì— ì“°ê¸°ê°€ ì„±ê³µí•˜ë©´ ëª¨ë“  ë³´ì¡° ìƒ¤ë“œë¡œ ì“°ê¸°ê°€ ë™ì‹œì— ì „íŒŒëœë‹¤.
* ì£¼ ìƒ¤ë“œë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ê²Œ ë˜ë©´ ë³´ì¡° ìƒ¤ë“œì¤‘ ê¸°ë³¸ ìƒ¤ë“œê°€ ì„ ì¶œë˜ê³  ìœ„ì˜ ì ˆì°¨ê°€ ë‹¤ì‹œ ì‹¤í–‰ëœë‹¤.

ê²€ìƒ‰ ìž‘ì—…ì—ì„œëŠ” ì„±ëŠ¥ í–¥ìƒì„ ìœ„í•˜ì—¬ ëª¨ë“  ìƒ¤ë“œì¤‘ ë¬´ìž‘ìœ„ë¡œ ìœ íš¨í•œ ìƒ¤ë“œ ì§‘í•©ìœ¼ë¡œ ì„ íƒí•œë‹¤. ESëŠ” ìƒ¤ë“œì— ë…¸ë“œë¥¼ ë” ìž˜ ë¶„ì‚°í•˜ëŠ” ë‹¤ì–‘í•œ í• ë‹¹ ì•Œê³ ë¦¬ì¦˜ì„ ì œê³µí•˜ê³  ìžˆë‹¤. ë ˆí”Œë¦¬ì¹´ëŠ” ë°ì´í„° ë…¸ë“œì˜ ë™ê¸°í™” ë•Œë¬¸ì— ìƒ‰ì¸ ì‹œê°„ì˜ ì¦ê°€ì™€ ë³´ì¡° ìƒ¤ë“œì— ë©”ì‹œì§€ ì „íŒŒë¡œ ì¸í•˜ì—¬ ì„±ëŠ¥ ì €í•˜ë¥¼ ê°€ì ¸ì˜¤ì§€ë§Œ ì‹œë¢°ì„±ì„ ë†’ì´ëŠ” ì—­í™œê³¼ ê²€ìƒ‰ì‹œ ì†ë„ í–¥ìƒì„ ì œê³µí•œë‹¤.

#### ëª¨ë²” ì‚¬ë¡€

ë°ì´í„° ì†ì‹¤ì„ ë§‰ê³  HAë¥¼ ìœ„í•´ ìµœì†Œí•œ í•œ ê°œì˜ ë ˆí”Œë¦¬ì¹´ë¥¼ ê°€ì ¸ì•¼ í•œë‹¤. ì‹œìŠ¤í…œì€ ë…¸ë“œ ì‹¤íŒ¨ì—ë„ downtimeê³¼ ë°ì´í„° ì†ì‹¤ ì—†ì´ ë™ìž‘ í•  ìˆ˜ ìžˆê²Œ ëœë‹¤. ê²€ìƒ‰ì—ì„œ í™•ìž¥ ê°€ëŠ¥í•œ ì„±ëŠ¥ì„ ìœ„í•´ ê³¡ê° ìˆ˜ì— ë”°ë¼ ë ˆí”Œë¦¬ì¹´ì˜ ìˆ˜ë¥¼ ëŠ˜ë¦¬ëŠ” ë°©ë²•ë„ ê³ ë ¤í•  ìˆ˜ ìžˆë‹¤.

#### ë³´ì¶© ì„¤ëª…

í´ëŸ¬ìŠ¤í„°ëŠ” 3ê°€ì§€ ìƒíƒœë¥¼ ê°€ì§€ê²Œ ëœë‹¤.

* ê·¸ë¦°(Green) ëª¨ë“ ê²ƒì´ ì •ìƒì¸ ìƒíƒœì´ë‹¤.
* ì˜ë¡œ(Yellow) ì¼ë¶€ ìƒ¤ë“œê°€ ëˆ„ë½ëìœ¼ë‚˜ ìƒ‰ì¸ ë° ê²€ìƒ‰ì€ ì •ìƒì´ë‹¤.
* ë ˆë“œ(Red) ìƒ‰ì¸ì´ ë¶ˆê°€ëŠ¥í•˜ë©° ëˆ„ë½ëœ ìƒ¤ë“œ ë•Œë¬¸ì— ëª¨ë“  ìž‘ì—…ì´ ì‹¤íŒ¨í•œë‹¤. ëˆ„ë½ëœ ìƒ¤ë“œë¥¼ ë‹¤ì‹œ ì—°ê²°í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ë°ì´í„° ì†ì‹¤ì´ ë°œìƒí•œë‹¤.

#### ì˜ë¡œ ìƒíƒœ í•´ê²°ë²•

í• ë‹¹ë˜ì§€ ì•Šì€ ìƒ¤ë“œê°€ í´ëŸ¬ìŠ¤í„°ì— ì¡´ìž¬í•˜ë©´ ì˜ë¡œ ìƒíƒœê°€ ëœë‹¤. í´ëŸ¬ìŠ¤í„°ê°€ ë³µêµ¬ìƒíƒœì— ìžˆë‹¤ë©´ ìƒ¤ë“œ ì‹œìž‘ ì ˆì°¨ê°€ ë§ˆì¹  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¬ë©´ ëœë‹¤. í˜¹ì€ ë ˆí”Œë¦¬ì¹´ ê°œìˆ˜ë¥¼ ì¤„ì´ë„ë¡ í•œë‹¤. í•˜ì§€ë§Œ ìµœì†Œ 1ê°œì˜ ë ˆí”Œë¦¬ì¹´ë¥¼ ìœ ì§€í•´ì•¼ HAê°€ ê°€ëŠ¥í•œ ì ì„ ìžŠì§€ ë§ë„ë¡ í•œë‹¤.

#### ë ˆë“œ ìƒíƒœ í•´ê²°ë²•

* ë°ì´í„°ë¥¼ ë°±ì—…, ìŠ¤ëƒ…ìƒ·ìœ¼ë¡œ ë³µêµ¬í•œë‹¤.

### ESì™€ í†µì‹ 

ESëŠ” HTTPì™€ ë„¤ì´í‹°ë¸Œ í”„ë¡œí† ì½œ ë‘ê°€ì§€ ë°©ë²•ì„ ì œê³µí•œë‹¤.

#### ë¶„ì„

ESëŠ” RESTful ì„œë²„ì²˜ëŸ¼ ë™ìž‘í•˜ê²Œ ì„¤ê³„ ë˜ì–´ ìžˆë‹¤. ëª¨ë“  í”„ë¡œí† ì½œì—ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ìž¥ë‹¨ì ì´ ì¡´ìž¬í•œë‹¤.

| í”„ë¡œí† ì½œ       | ìž¥ì                                 | ë‹¨ì                                          | ìœ í˜•   |
| ---------- | --------------------------------- | ------------------------------------------ | ---- |
| HTTP(9200) | í˜¸í™˜ì„±ì´ ë†’ë‹¤. í”„ë½ì‹œë„ ë°¸ëŸ°ì„œë„ HTTP í˜•íƒœë¡œ ê°€ëŠ¥í•˜ë‹¤. | HTTP ì˜¤ë²„ í—¤ë“œê°€ ìžˆë‹¤. ë°ì´í„° ì ‘ê·¼ì„ ìœ„í•´ ë” ë§Žì€ hopì„ ì†Œëª¨í•œë‹¤. | í…ìŠ¤íŠ¸  |
| ë„¤ì´í‹°ë¸Œ(9300) | ëŒ€ê·œëª¨ ìƒ‰ì¸ì— ì í•©í•˜ë‹¤.                     | API ë²„ì „ì— ë”°ë¼ ë™ìž‘í•œë‹¤. JAVAì—ì„œë§Œ ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤.          | ë°”ì´ë„ˆë¦¬ |

### HTTP í”„ë¡œí† ì½œ

#### ë¶„ì„

ëª¨ë“  í´ë¼ì´ì–¸íŠ¸ëŠ” ì„œë²„ ìƒ‰ì¸ìœ¼ë¡œ ì—°ê²°ì„ ë§Œë“¤ê³  ì‘ë‹µì„ ê°€ì ¸ì˜¨ë‹¤. ì‘ë‹µì˜ ëŒ€ë¶€ë¶„ì€ JSONì´ë‹¤. ì„ í˜¸í•˜ëŠ” ì–´ë–¤ í”„ë¡œê·¸ëž˜ë° ì–¸ì–´ë¡œë“  ESê¸°ëŠ¥ì„ í˜¸ì¶œ í•  ìˆ˜ ìžˆë‹¤. ë‹¤ìŒì˜ ìž¥ì ì„ ê°€ì§„ë‹¤.

* ì´ì‹ì„± ì›¹ í‘œì¤€ì„ ì‚¬ìš©í•˜ë¯€ë¡œ ëª¨ë“  ê°œë°œ ì–¸ì–´ë¥¼ ì§€ì›í•œë‹¤ê³  ë´ë„ ëœë‹¤.
* ë‚´êµ¬ì„± REST APIì˜ ë³€ê²½ì€ ì ë‹¤. ë„¤ì´í‹°ë¸Œì™€ ì°¨ì´ì ì´ë‹¤.
* ì‰¬ìš´ ì‚¬ìš© JSON ìœ¼ë¡œ í˜¸ì¶œí•˜ê³  ì‘ë‹µí•œë‹¤.
* ë‹¤ë¥¸ í”„ë¡œí† ì½œ ë³´ë‹¤ ë§Žì€ ì§€ì› ESì˜ í”ŒëŸ¬ê·¸ì¸ì€ ì¼ë°˜ì ìœ¼ë¡œ HTTP REST ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì œê³µí•œë‹¤.
* í´ëŸ¬ìŠ¤í„° í™•ìž¥ í´ëŸ¬ìŠ¤í„° ë…¸ë“œë¥¼ ë‹¨ìˆœížˆ HTTP ë¡œë“œ ë°¸ëŸ°ì„œ ë’¤ì— ë‘ê¸°ë§Œ í•˜ë©´ HAProxyë‚˜ NGINXë“±ì˜ ìš”ì²­ ë°¸ëŸ°ìŠ¤ ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ìžˆë‹¤.

#### ë³´ì¶©ì„¤ëª…

ES ì»¤ë®¤ë‹ˆí‹°ëŠ” ì‚¬ìš©ìžê°€ ë§Žì€ ê°œë°œì–¸ì–´ì— ëŒ€í•´ í´ë¼ì´ì–¸íŠ¸ SDKë¥¼ ì œê³µí•˜ê³  ìžˆë‹¤.

### ë„¤ì´í‹°ë¸Œ í”„ë¡œí† ì½œ

#### ë¶„ì„

ë„¤ì´í‹°ë¸Œ í´ë¼ì´ì–¸íŠ¸ë¥¼ ì´ˆê¸°í™” í•˜ê¸° ìœ„í•´ ì´ë¥¼ ì ì ˆížˆ êµ¬ì„±í•˜ëŠ” ì„¤ì •ì´ í•„ìš”í•˜ë‹¤.

* cluster.name í´ëŸ¬ìŠ¤í„°ì˜ ì´ë¦„ì´ë‹¤.
* client.transprot.sniff ë‚˜ë¨¸ì§€ í´ëŸ¬ìŠ¤í„° í† í´ë¦¬ì§€ë¥¼ ìŠ¤ë‹ˆí•‘í•´ì„œ ë°œê²¬í•œ ë…¸ë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ë¨¸ì‹ ì˜ í´ë¼ì´ì–¸íŠ¸ ëª©ë¡ìœ¼ë¡œ ì¶”ê°€í•œë‹¤.

ìœ„ ì„¤ì •ì„ ì‚¬ìš©í•˜ì—¬ ìƒˆ í´ë¼ì´ì–¸íŠ¸ë¥¼ ì´ˆê¸°í™” í•  ìˆ˜ ìžˆë‹¤.

#### ë³´ì¶© ì„¤ëª…

ES ë‚´ë¶€ í”„ë¡œí† ì½œì´ë‹¤. ESì™€ í†µì‹ í•˜ëŠ” ê°€ìž¥ ë¹ ë¥¸ í”„ë¡œí† ì½œì´ë‹¤. ë„¤ì´í‹°ë¸Œ í”„ë¡œí† ì½œì€ ìµœì í™”ëœ ë°”ì´ë„ˆë¦¬ í”„ë¡œí† ì½œì´ë©° JVM ì–¸ì–´ì—ì„œë§Œ ë™ìž‘í•œë‹¤. elasticsearch.jarë¥¼ í¬í•¨í•œ êµ¬í˜„ìœ¼ë¡œ ì‘ìš© í”„ë¡œê·¸ëž¨ì„ ë§Œë“¤ ìˆ˜ ìžˆë‹¤. ì´ í”„ë¡œí† ì½œì€ HTTPì™€ ë‹¬ë¦¬ ESì˜ ë‚´ë¶€ êµ¬ì¡°ë¥¼ ì•Œì•„ì•¼ ì‚¬ìš© ê°€ëŠ¥í•˜ë¯€ë¡œ ë‚œì´ë„ê°€ ë§¤ìš° ë†’ë‹¤. ë„¤ì´í‹°ë¸Œ í”„ë¡œí† ì½œì€ ëŒ€ê·œëª¨ ë°ì´í„°ë¥¼ ìž…ë ¥í•˜ëŠ”ë° ë§¤ìš° ìœ ìš©í•˜ì§€ë§Œ í”ŒëŸ¬ê·¸ì¸ë“±ì˜ ì—”ë“œ í¬ì¸íŠ¸ê°€ ì œê³µë˜ì§€ ì•Šì•„ì„œ íŠ¹ì • ê¸°ëŠ¥ì„ ì´ìš© ë¶ˆê°€ëŠ¥ í•˜ë‹¤.

#### ì°¸ê³  ì‚¬í•­

ë„¤ì´í‹°ë¸Œ í”„ë¡œí† ì½œì€ ìžë°” ì„¸ê³„ì—ì„œ ê°€ìž¥ ë§Žì´ ì‚¬ìš©ëœë‹¤. 14ìž¥, 15ìž¥, 17ìž¥ì—ì„œ í•´ë‹¹ ë‚´ìš©ì„ ë‹¤ë£¬ë‹¤.

> Written with [StackEdit](https://stackedit.io/).
